<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Trang qu·∫£n tr·ªã Th∆∞ vi·ªán S·ªë UEF">
    <meta name="author" content="Library Admin">

    <title layout:title-pattern="$LAYOUT_TITLE - $CONTENT_TITLE">Th∆∞ vi·ªán S·ªë Admin</title>

    <link th:href="@{/vendor/fontawesome-free/css/all.min.css}" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

    <link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">

    <style>
        :root {
            /* === ADMIN THEME VARIABLES (Blue/White/Gray - SB Admin 2 Style) === */
            --admin-primary: #4e73df; /* M√†u xanh d∆∞∆°ng b·∫°n cung c·∫•p - c√≥ th·ªÉ d√πng #4e73df c·ªßa SB Admin 2 n·∫øu mu·ªën gi·ªëng h·ªát */
            --admin-primary-darker: #4e73df; /* T√¥ng xanh ƒë·∫≠m h∆°n cho hover (n·∫øu v·∫´n gi·ªØ hover) */
            --admin-primary-lighter: #4e73df; /* T√¥ng xanh nh·∫°t h∆°n */

            --admin-white: #ffffff;
            --admin-gray-100: #f8f9fc; /* N·ªÅn content c·ªßa SB Admin 2 */
            --admin-gray-200: #eaecf4;
            --admin-gray-300: #dddfeb; /* M√†u vi·ªÅn nh·∫π */
            --admin-gray-400: #d1d3e2; /* M√†u vi·ªÅn input */
            --admin-gray-500: #b7b9cc;
            --admin-gray-600: #858796; /* Text ph·ª• c·ªßa SB Admin 2 */
            --admin-gray-700: #6e707e;
            --admin-gray-800: #5a5c69; /* Text ch√≠nh c·ªßa SB Admin 2 */
            --admin-gray-900: #3a3b45;

            --admin-text-on-primary-bg: #ffffff; /* Ch·ªØ tr·∫Øng tr√™n n·ªÅn xanh primary */

            /* Sidebar specifics - d√πng m√†u xanh primary c·ªßa b·∫°n */
            --sidebar-bg-start: var(--admin-primary);
            --sidebar-bg-end: #4e73df; /* M·ªôt t√¥ng ƒë·∫≠m h∆°n c·ªßa xanh primary */
            --sidebar-text-color: rgba(255, 255, 255, 0.8);
            --sidebar-text-active-color: #ffffff;
            --sidebar-icon-color: rgba(255, 255, 255, 0.6);
            --sidebar-icon-active-color: #ffffff;

            /* B·ªè hover background n·∫øu b·∫°n mu·ªën */
            --sidebar-item-hover-bg: transparent; /* HO·∫∂C var(--admin-primary-darker) n·∫øu v·∫´n mu·ªën hover */
            --sidebar-item-hover-text-color: var(--sidebar-text-active-color); /* M√†u ch·ªØ khi hover */

            --sidebar-item-active-bg: var(--admin-primary-lighter); /* N·ªÅn khi active - c√≥ th·ªÉ l√† m·ªôt xanh nh·∫°t h∆°n */
            --sidebar-item-active-text-color: var(--admin-text-on-primary-bg); /* Ch·ªØ khi active */

            --sidebar-divider-color: rgba(255, 255, 255, 0.15);
            --sidebar-heading-color: rgba(255, 255, 255, 0.4);
            --sidebar-collapse-inner-bg: rgba(0,0,0,0.15);
            --sidebar-collapse-item-hover-bg: rgba(255,255,255,0.1);

            /* Topbar, Content, Footer */
            --topbar-bg: var(--admin-white);
            --content-wrapper-bg: var(--admin-gray-100);
            --card-bg-admin: var(--admin-white);
            --card-header-bg-admin: #f8f9fc;
            --card-border-admin: var(--admin-gray-300);
            --footer-bg-admin: var(--admin-white);
            --footer-text-admin: var(--admin-gray-700);

            /* C√°c bi·∫øn m√†u g·ªó v√† be (ƒë·ªÉ ƒë√≥ n·∫øu b·∫°n c√≥ ph·∫ßn t·ª≠ ƒë·∫∑c bi·ªát n√†o ƒë√≥ v·∫´n mu·ªën d√πng) */
            --my-wood-primary: #4e73df;
            /* ... c√°c bi·∫øn g·ªó kh√°c ... */
        }

        /* √Åp d·ª•ng theme Xanh/Tr·∫Øng/X√°m cho SB Admin 2 */
        body#page-top {
            background-color: var(--content-wrapper-bg); /* N·ªÅn chung cho to√†n b·ªô trang admin */
        }

        #wrapper #content-wrapper {
            background-color: var(--content-wrapper-bg);
        }

        /* Sidebar */
        .sidebar#accordionSidebar { /* Class .bg-gradient-primary ƒë√£ b·ªã override b·ªüi ID */
            background-color: var(--admin-primary) !important;
            background-image: linear-gradient(180deg, var(--sidebar-bg-start) 10%, var(--sidebar-bg-end) 100%) !important;
        }
        .sidebar .nav-item .nav-link,
        .sidebar .sidebar-brand .sidebar-brand-text,
        .sidebar .nav-item .nav-link span { /* ƒê·∫£m b·∫£o span c≈©ng ƒë·ªïi m√†u */
            color: var(--sidebar-text-color) !important;
        }
        .sidebar .nav-item .nav-link i {
            color: var(--sidebar-icon-color) !important;
        }

        /* B·ªè hi·ªáu ·ª©ng hover n·ªÅn n·∫øu mu·ªën */
        .sidebar .nav-item .nav-link:hover {
            background-color: var(--sidebar-item-hover-bg) !important;
            color: var(--sidebar-item-hover-text-color) !important;
        }
        .sidebar .nav-item .nav-link:hover i,
        .sidebar .nav-item .nav-link:hover span {
            color: var(--sidebar-item-hover-text-color) !important;
        }

        /* M·ª•c menu active */
        .sidebar .nav-item.active > .nav-link {
            background-color: var(--sidebar-item-active-bg) !important;
            color: var(--sidebar-item-active-text-color) !important;
            font-weight: bold;
        }
        .sidebar .nav-item.active > .nav-link i,
        .sidebar .nav-item.active > .nav-link span {
            color: var(--sidebar-item-active-text-color) !important;
        }

        .sidebar .sidebar-heading {
            color: var(--sidebar-heading-color) !important;
        }
        .sidebar hr.sidebar-divider {
            border-top: 1px solid var(--sidebar-divider-color);
        }
        /* M·ª•c con trong collapse */
        .sidebar .collapse-inner {
            background-color: var(--sidebar-collapse-inner-bg) !important;
            border-radius: 0.35rem;
        }
        .sidebar .collapse-inner .collapse-header {
            color: var(--sidebar-heading-color) !important; /* C√≥ th·ªÉ l√† m√†u s√°ng h∆°n 1 ch√∫t */
            font-size: .65rem;
            font-weight: 700;
        }
        .sidebar .collapse-inner .collapse-item {
            color: var(--sidebar-text-color) !important;
            opacity: 0.85;
        }
        .sidebar .collapse-inner .collapse-item:hover,
        .sidebar .collapse-inner .collapse-item.active {
            background-color: var(--sidebar-collapse-item-hover-bg) !important;
            color: var(--sidebar-text-active-color) !important;
            opacity: 1;
        }

        /* Topbar */
        .topbar {
            background-color: var(--topbar-bg) !important;
            box-shadow: 0 .15rem 1.75rem 0 rgba(58,59,69,.15)!important; /* Shadow g·ªëc c·ªßa SB Admin 2 */
        }
        .topbar .navbar-text,
        .topbar .nav-item .nav-link .mr-2.d-none.d-lg-inline.text-gray-600.small { /* T√™n admin tr√™n topbar */
            color: var(--admin-dark-text) !important;
        }
        .topbar .navbar-text .wave-hand {
            font-size: 1.1em;
            color: var(--admin-primary); /* Tay v·∫´y m√†u xanh */
        }
        .topbar .nav-item .nav-link i:not(.fa-bars) { /* Icon user, bell ... tr√™n topbar */
            color: var(--admin-gray-600) !important; /* M√†u icon x√°m c·ªßa SB Admin 2 */
        }
        .topbar .nav-item .nav-link:hover i:not(.fa-bars) {
            color: var(--admin-dark-text) !important;
        }


        /* Cards */
        .card {
            background-color: var(--admin-card-bg);
            border: 1px solid var(--admin-border-color);
        }
        .card .card-header {
            background-color: var(--card-header-bg-admin);
            border-bottom: 1px solid var(--admin-border-color);
        }
        .card .card-header .m-0.font-weight-bold.text-primary {
            color: var(--admin-primary) !important;
        }
        .text-gray-800 { color: var(--admin-dark-text) !important; }
        .text-gray-600 { color: var(--admin-secondary-text) !important; }
        .text-gray-300 { color: var(--admin-gray-300) !important; }


        /* Buttons (Bootstrap primary button s·∫Ω d√πng m√†u admin-primary) */
        .btn-primary {
            background-color: var(--admin-primary) !important;
            border-color: var(--admin-primary) !important;
            color: var(--admin-text-on-primary-bg) !important;
        }
        .btn-primary:hover {
            background-color: var(--admin-primary-darker) !important;
            border-color: var(--admin-primary-darker) !important;
        }
        .btn-secondary { /* N√∫t Reset, H·ªßy */
            background-color: #858796 !important; /* SB Admin 2 secondary */
            border-color: #858796 !important;
            color: #fff !important;
        }
        .btn-secondary:hover {
            background-color: #717384 !important;
            border-color: #60616f !important;
        }


        /* Form controls */
        .form-control {
            background-color: var(--admin-white);
            border: 1px solid var(--admin-gray-400); /* #d1d3e2 */
            color: var(--admin-dark-text);
        }
        .form-control:focus {
            border-color: var(--admin-primary);
            box-shadow: 0 0 0 0.2rem rgba(var(--admin-primary),.25); /* M√†u focus xanh */
        }
        .form-label, .form-check-label {
            color: var(--admin-dark-text);
        }
        .form-text.text-muted {
            color: var(--admin-secondary-text) !important;
        }

        /* Footer */
        footer.sticky-footer {
            background-color: var(--footer-bg-admin) !important;
            color: var(--footer-text-admin) !important;
            border-top: 1px solid var(--admin-border-color);
        }
        .scroll-to-top { /* N√∫t cu·ªôn l√™n ƒë·∫ßu trang c·ªßa SB Admin 2 */
            background-color: var(--admin-primary) !important;
        }
        .scroll-to-top:hover {
            background-color: var(--admin-primary-darker) !important;
        }

        /* C√°c style t√πy ch·ªânh kh√°c c·ªßa b·∫°n (wave, chatbox, toast, modals...) gi·ªØ nguy√™n */
        /* B·∫°n n√™n ƒë∆∞a ch√∫ng v√†o m·ªôt file CSS ri√™ng v√† link v√†o layout */
        /* V√≠ d·ª•: */
        @keyframes wave { 0% { transform: rotate(0deg); } 15% { transform: rotate(14deg); } 30% { transform: rotate(-8deg); } 40% { transform: rotate(14deg); } 50% { transform: rotate(-4deg); } 60% { transform: rotate(10deg); } 70% { transform: rotate(0deg); } 100% { transform: rotate(0deg); } }
        .wave-hand { display: inline-block; animation: wave 2s infinite; transform-origin: 70% 70%; }
        /* ... (ph·∫ßn c√≤n l·∫°i c·ªßa style b·∫°n ƒë√£ cung c·∫•p trong dashboard.html) ... */
    </style>
    <th:block layout:fragment="page_head_specific"></th:block>
</head>

<body id="page-top">
<div id="wrapper">

    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">
        <a class="sidebar-brand d-flex align-items-center justify-content-center" th:href="@{/admin/dashboard}">
            <div class="sidebar-brand-icon rotate-n-15"><i class="fas fa-laugh-wink"></i></div> <div class="sidebar-brand-text mx-3">Library Admin</div>
        </a>
        <hr class="sidebar-divider my-0">

        <li class="nav-item" th:classappend="${#httpServletRequest != null && #httpServletRequest.requestURI != null && #httpServletRequest.requestURI.startsWith('/admin/dashboard') ? 'active' : ''}">
            <a class="nav-link" th:href="@{/admin/dashboard}"><i class="fas fa-fw fa-tachometer-alt"></i><span>Dashboard</span></a>
        </li>

        <li class="nav-item" th:classappend="${#httpServletRequest != null && #httpServletRequest.requestURI != null && #httpServletRequest.requestURI.startsWith('/staff') ? 'active' : ''}">
            <a class="nav-link" th:href="@{/staff/home}"> <i class="fas fa-fw fa-users-cog"></i>
                <span>Giao di·ªán Nh√¢n vi√™n</span>
            </a>
        </li>
        <hr class="sidebar-divider">

        <div class="sidebar-heading">Qu·∫£n tr·ªã</div>

        <li class="nav-item" th:classappend="${#httpServletRequest != null && #httpServletRequest.requestURI != null && #httpServletRequest.requestURI.startsWith('/admin/comprehensive-book-management') ? 'active' : ''}">
            <a class="nav-link" th:href="@{/admin/comprehensive-book-management}"> <i class="fas fa-fw fa-book-open"></i> <span>Qu·∫£n l√Ω S√°ch To√†n Di·ªán</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseSystemSettings" aria-expanded="true" aria-controls="collapseSystemSettings">
                <i class="fas fa-fw fa-cogs"></i><span>C√†i ƒë·∫∑t & H·ªá th·ªëng</span>
            </a>
            <div id="collapseSystemSettings" class="collapse" aria-labelledby="headingSystemSettings" data-parent="#accordionSidebar">
                <div class="bg-white py-2 collapse-inner rounded">
                    <h6 class="collapse-header">H·ªá th·ªëng:</h6>
                    <a class="collapse-item" th:href="@{/admin/system-management}">Qu·∫£n l√Ω h·ªá th·ªëng</a>
                    <h6 class="collapse-header">Qu·∫£n l√Ω th√¥ng b√°o:</h6>
                    <a class="collapse-item" th:href="@{/admin/notifications/marquee}">G·ª≠i th√¥ng b√°o chung</a>
                    <a class="collapse-item" th:href="@{/admin/notifications/user/send}">G·ª≠i th√¥ng b√°o ng∆∞·ªùi d√πng</a>
                    <h6 class="collapse-header C√¥ng c·ª• Admin:">C√¥ng c·ª• Admin:</h6>
                    <a class="collapse-item" href="#">Ho·∫°t ƒë·ªông ng∆∞·ªùi d√πng</a>
                    <a class="collapse-item" href="#">Nh·∫≠t k√Ω h·ªá th·ªëng </a>
                    <a class="collapse-item" href="#">B√°o c√°o t·ªïng h·ª£p</a>
                </div>
            </div>
        </li>
        <hr class="sidebar-divider d-none d-md-block">

        <li class="nav-item">
            <form th:action="@{/auth/logout}" method="post" id="adminLogoutForm" class="d-inline">
                <a class="nav-link" href="#" onclick="document.getElementById('adminLogoutForm').submit(); return false;">
                    <i class="fas fa-fw fa-sign-out-alt"></i>
                    <span>ƒêƒÉng xu·∫•t</span>
                </a>
            </form>
        </li>

        <div class="text-center d-none d-md-inline">
            <button class="rounded-circle border-0" id="sidebarToggle"></button>
        </div>
    </ul>
    <div id="content-wrapper" class="d-flex flex-column">
        <div id="content">
            <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">
                <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                    <i class="fa fa-bars"></i>
                </button>

                <div class="d-none d-sm-flex align-items-center mr-auto pl-3">
                    <h4 class="greeting-admin mb-0" style="display: flex; align-items: center; font-size: 1.05rem; color: var(--admin-dark-text);">
                    <span class="wave-hand" style="font-size: 1.3em; margin-right: 8px;">üëã</span>
                    Xin ch√†o_
                        <span th:text="${fullName != null ? fullName : 'Admin'}">Admin</span>
                </h4>
                </div>
            </nav>
            <div class="container-fluid">
                <th:block layout:fragment="content"></th:block>
            </div>
        </div>
        <footer class="sticky-footer bg-white">
            <div class="container my-auto">
                <div class="copyright text-center my-auto">
                    <span>B·∫£n quy·ªÅn &copy; Th∆∞ vi·ªán S·ªë UEF <script>document.write(new Date().getFullYear());</script></span>
                </div>
            </div>
        </footer>
    </div>
</div>
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="logoutModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="logoutModalLabel">S·∫µn s√†ng r·ªùi ƒëi?</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">√ó</span>
                </button>
            </div>
            <div class="modal-body">Ch·ªçn "ƒêƒÉng xu·∫•t" b√™n d∆∞·ªõi n·∫øu b·∫°n ƒë√£ s·∫µn s√†ng k·∫øt th√∫c phi√™n hi·ªán t·∫°i.</div>
            <div class="modal-footer">
                <button class="btn btn-secondary" type="button" data-dismiss="modal">H·ªßy</button> <form th:action="@{/auth/logout}" method="post">
                <button class="btn btn-primary" type="submit">ƒêƒÉng xu·∫•t</button>
            </form>
            </div>
        </div>
    </div>
</div>

<script th:src="@{/vendor/jquery/jquery.min.js}"></script>
<script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>

<script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>

<script th:src="@{/js/sb-admin-2.min.js}"></script>

<th:block layout:fragment="page_scripts"></th:block>

</body>
</html>